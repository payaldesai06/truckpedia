{"version":3,"sources":["webpack:///resources/js/src/views/pages/report/components/LoadBillingReport.vue","webpack:///./resources/js/src/views/pages/report/components/LoadBillingReport.vue","webpack:///./resources/js/src/mixins/globalMixins.js","webpack:///./resources/js/src/views/pages/report/components/LoadBillingReport.vue?3fce","webpack:///./resources/js/src/views/pages/report/components/LoadBillingReport.vue?8472","webpack:///./resources/js/src/views/pages/report/components/LoadBillingReport.vue?7a74"],"names":["render","_vm","_c","_self","staticClass","_v","attrs","config","flat_pikr_config","on","onDatePickerClose","model","value","selectedDateRange","callback","$$v","expression","color","click","$event","generateReport","_e","staticRenderFns","_withStripped","methods","showErrorMessage","message","time","$vs","notify","title","text","showSuccessMessage"],"mappings":"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","file":"js/chunks/200.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"w-full py-6 flex items-center justify-between\">\r\n      <div class=\"flex items-end py-5 space-x-2\">\r\n        <div>\r\n          <label class=\"text-sm opacity-75\">Choose Period</label>\r\n          <flat-pickr\r\n            v-model=\"selectedDateRange\"\r\n            :config=\"flat_pikr_config\"\r\n            class=\"w-full\"\r\n            @on-close=\"onDatePickerClose\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <vs-button\r\n            color=\"primary\"\r\n            v-if=\"selectedDateRange\"\r\n            @click=\"generateReport('mas')\"\r\n            >MAS Report</vs-button\r\n          >\r\n          <vs-button\r\n            color=\"primary\"\r\n            v-if=\"selectedDateRange\"\r\n            @click=\"generateReport('syncada')\"\r\n            >Syncada Report</vs-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { downloadCsv, getApiErrorMsg } from '@/helpers/helper';\r\nimport globalMixins from '@/mixins/globalMixins';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      selectedDateRange: null,\r\n      // Flate Pikr Config\r\n      flat_pikr_config: {\r\n        mode: 'range',\r\n      },\r\n      payload: {},\r\n      csvName: '',\r\n      rows: [],\r\n    };\r\n  },\r\n  mixins: [globalMixins],\r\n  methods: {\r\n    /**\r\n     * Get Loads Reports based on type\r\n     */\r\n    async generateReport(type) {\r\n      this.$vs.loading();\r\n      try {\r\n        const response = await this.$store.dispatch(\r\n          type == 'mas'\r\n            ? 'report/exportLoadsMasReport'\r\n            : 'report/exportLoadsSyncadaReport',\r\n          {\r\n            ...this.payload,\r\n          }\r\n        );\r\n        this.rows = response.rows;\r\n        if (this.rows.length) {\r\n          // Report csv name based on start and end dates\r\n          if (this.payload.startDate === this.payload.endDate) {\r\n            this.csvName = `LGSB_${\r\n              type == 'mas' ? 'MAS' : 'Syncada'\r\n            } Upload ${this.$dayjs(this.payload.startDate).format(\r\n              'MM.DD.YY'\r\n            )}.csv`;\r\n          } else {\r\n            this.csvName = `LGSB_${\r\n              type == 'mas' ? 'MAS' : 'Syncada'\r\n            } Upload ${this.$dayjs(this.payload.startDate).format(\r\n              'MM.DD.YY'\r\n            )}-${this.$dayjs(this.payload.endDate).format('MM.DD.YY')}.csv`;\r\n          }\r\n          this.setDataForCsv();\r\n        } else {\r\n          this.showErrorMessage('Data not found');\r\n        }\r\n      } catch (error) {\r\n        this.showErrorMessage(getApiErrorMsg(error));\r\n      } finally {\r\n        this.$vs.loading.close();\r\n      }\r\n    },\r\n    /**\r\n     * convert the data to csv\r\n     * @param {*} rows\r\n     */\r\n    convertToCsv(rows) {\r\n      return rows.join('\\n');\r\n    },\r\n    setDataForCsv() {\r\n      downloadCsv(this.convertToCsv(this.rows), this.csvName);\r\n    },\r\n    onDatePickerClose(selectedDates, dateStr, instance) {\r\n      if (selectedDates.length == 1) {\r\n        instance.setDate([selectedDates[0], selectedDates[0]], true);\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    // look over the date range for start and end date if there is one set the end date to same\r\n    selectedDateRange: {\r\n      handler(val) {\r\n        if (val) {\r\n          const dates = this.selectedDateRange.split(' to ');\r\n          if (dates.length && dates.length === 1) {\r\n            this.payload.startDate = dates[0];\r\n            this.payload.endDate = dates[0];\r\n          } else {\r\n            this.payload.startDate = dates[0];\r\n            this.payload.endDate = dates[1];\r\n          }\r\n        }\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\"div\", [\n    _c(\n      \"div\",\n      { staticClass: \"w-full py-6 flex items-center justify-between\" },\n      [\n        _c(\"div\", { staticClass: \"flex items-end py-5 space-x-2\" }, [\n          _c(\n            \"div\",\n            [\n              _c(\"label\", { staticClass: \"text-sm opacity-75\" }, [\n                _vm._v(\"Choose Period\"),\n              ]),\n              _vm._v(\" \"),\n              _c(\"flat-pickr\", {\n                staticClass: \"w-full\",\n                attrs: { config: _vm.flat_pikr_config },\n                on: { \"on-close\": _vm.onDatePickerClose },\n                model: {\n                  value: _vm.selectedDateRange,\n                  callback: function ($$v) {\n                    _vm.selectedDateRange = $$v\n                  },\n                  expression: \"selectedDateRange\",\n                },\n              }),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            [\n              _vm.selectedDateRange\n                ? _c(\n                    \"vs-button\",\n                    {\n                      attrs: { color: \"primary\" },\n                      on: {\n                        click: function ($event) {\n                          return _vm.generateReport(\"mas\")\n                        },\n                      },\n                    },\n                    [_vm._v(\"MAS Report\")]\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.selectedDateRange\n                ? _c(\n                    \"vs-button\",\n                    {\n                      attrs: { color: \"primary\" },\n                      on: {\n                        click: function ($event) {\n                          return _vm.generateReport(\"syncada\")\n                        },\n                      },\n                    },\n                    [_vm._v(\"Syncada Report\")]\n                  )\n                : _vm._e(),\n            ],\n            1\n          ),\n        ]),\n      ]\n    ),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","export default {\r\n  methods: {\r\n    showErrorMessage(message, time = 8000) {\r\n      this.$vs.notify({\r\n        time,\r\n        color: 'danger',\r\n        title: 'Error',\r\n        text: message,\r\n      });\r\n    },\r\n    showSuccessMessage(message, time = 5000) {\r\n      this.$vs.notify({\r\n        time,\r\n        color: 'primary',\r\n        title: 'Success',\r\n        text: message,\r\n      });\r\n    },\r\n  },\r\n};\r\n","import { render, staticRenderFns } from \"./LoadBillingReport.vue?vue&type=template&id=21278806&\"\nimport script from \"./LoadBillingReport.vue?vue&type=script&lang=js&\"\nexport * from \"./LoadBillingReport.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\laragon\\\\www\\\\ezpapel\\\\panel\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('21278806')) {\n      api.createRecord('21278806', component.options)\n    } else {\n      api.reload('21278806', component.options)\n    }\n    module.hot.accept(\"./LoadBillingReport.vue?vue&type=template&id=21278806&\", function () {\n      api.rerender('21278806', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/src/views/pages/report/components/LoadBillingReport.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadBillingReport.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadBillingReport.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadBillingReport.vue?vue&type=template&id=21278806&\""],"sourceRoot":""}
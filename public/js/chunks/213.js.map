{"version":3,"sources":["webpack:///resources/js/src/views/pages/menu/components/ViewEditRecord.vue","webpack:///./resources/js/src/views/pages/menu/components/ViewEditRecord.vue","webpack:///./resources/js/src/views/pages/menu/components/ViewEditRecord.vue?2c77","webpack:///./resources/js/src/views/pages/menu/components/ViewEditRecord.vue?ccfa","webpack:///./resources/js/src/views/pages/menu/components/ViewEditRecord.vue?df73"],"names":["render","_vm","_c","_self","staticClass","isDetailsViewActive","ref","attrs","isPromptActive","customFields","selectedItem","selectedRecord","nextIconVisible","hasNextRecord","previousIconVisible","hasPreviousRecord","recordLinkData","on","toggleDialog","toggleDetailsView","updateRecord","submitRecord","deleteRecord","next","nextRecord","prev","previousRecord","toggleFieldDialog","editField","deleteField","uploadFiles","deleteFile","searchLinkedRecords","_e","_v","isFieldDialogVisible","typesList","fieldTypes","selectedField","submenuList","rollUpTargets","submenuId","closeDialog","closeFieldDialog","addField","updateField","staticRenderFns","_withStripped"],"mappings":"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","file":"js/chunks/213.js","sourcesContent":["<template>\r\n  <div class=\"view-edit-records\">\r\n    <!-- Record Details View -->\r\n    <DetailsView\r\n      v-if=\"isDetailsViewActive\"\r\n      ref=\"detailsView\"\r\n      :isPromptActive=\"isDetailsViewActive\"\r\n      :customFields=\"customFields\"\r\n      :selectedItem=\"selectedRecord\"\r\n      :nextIconVisible=\"hasNextRecord\"\r\n      :previousIconVisible=\"hasPreviousRecord\"\r\n      :recordLinkData=\"recordLinkData\"\r\n      @toggleDialog=\"toggleDetailsView\"\r\n      @update:Details=\"updateRecord\"\r\n      @submit:Details=\"submitRecord\"\r\n      @delete:Details=\"deleteRecord\"\r\n      @next=\"nextRecord\"\r\n      @prev=\"previousRecord\"\r\n      @toggleFieldDialog=\"toggleFieldDialog\"\r\n      @editField=\"editField\"\r\n      @deleteField=\"deleteField\"\r\n      @uploadFiles=\"uploadFiles\"\r\n      @delete:File=\"deleteFile\"\r\n      @searchLinkedRecords=\"searchLinkedRecords\"\r\n    />\r\n\r\n    <!-- Field Form -->\r\n    <FieldForm\r\n      v-if=\"isFieldDialogVisible\"\r\n      :isPromptActive=\"isFieldDialogVisible\"\r\n      :typesList=\"fieldTypes\"\r\n      :selectedField=\"selectedField\"\r\n      :submenuList=\"submenuList\"\r\n      :rollUpTargets=\"rollUpTargets\"\r\n      :customFields=\"customFields\"\r\n      :submenuId=\"submenuId\"\r\n      @closeDialog=\"closeFieldDialog\"\r\n      @addField=\"addField\"\r\n      @updateField=\"updateField\"\r\n    />\r\n  </div>\r\n</template>\r\n<!-- eslint-disable nonblock-statement-body-position multiline-ternary -->\r\n<script>\r\nimport { isEmpty } from \"lodash\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  name: 'ViewEditRecord',\r\n  provide () {\r\n    return {\r\n      customFields: this.customFields,\r\n    }\r\n  },\r\n  props: {\r\n    customFields: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    fieldTypes: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  components: {\r\n    DetailsView: () => import(\"./DetailsView.vue\"),\r\n    FieldForm: () => import(\"./FieldForm.vue\"),\r\n  },\r\n  data () {\r\n    return {\r\n      isDetailsViewActive: false,\r\n      isFieldDialogVisible: false,\r\n      selectedRecord: null,\r\n      selectedField: null,\r\n      selectedRecordID: null,\r\n      rollUpTargets: null,\r\n      recordLinkData: {}\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('menuV2', ['getAllSubMenu']),\r\n    submenuId () {\r\n      const { submenuId } = (this.$route || {}).params || {}\r\n      return submenuId || null\r\n    },\r\n    hasNextRecord() {\r\n      // if (!isEmpty(this.selectedRecord) && this.selectedRecord.id) {\r\n      //   const index = this.dataObject.findIndex(\r\n      //     (item) => item.id === this.selectedRecord.id\r\n      //   )\r\n      //   return index < this.dataObject.length - 1\r\n      // }\r\n\r\n      return false;\r\n    },\r\n    hasPreviousRecord() {\r\n      // if (!isEmpty(this.selectedRecord) && this.selectedRecord.id) {\r\n      //   const index = this.dataObject.findIndex(\r\n      //     (item) => item.id === this.selectedRecord.id\r\n      //   )\r\n      //   return index > 0\r\n      // }\r\n\r\n      return false;\r\n    },\r\n    submenuList () {\r\n      const submenuId = this.submenuId;\r\n      return submenuId\r\n        ? this.getAllSubMenu.filter((item) => item.id !== parseInt(submenuId))\r\n        : this.getAllSubMenu\r\n    }\r\n  },\r\n  methods: {\r\n    searchLinkedRecords(payload){\r\n      this.$emit(\"searchLinkedRecords\", payload);\r\n    },\r\n    /* Details view controls : Start */\r\n    toggleDetailsView(record = []) {\r\n      if (!isEmpty(record)) {\r\n        this.selectedRecord = record;\r\n        this.selectedRecordID = record[0].id;\r\n      } else {\r\n        this.selectedRecord = [];\r\n        this.selectedRecordID = null;\r\n      }\r\n\r\n      this.isDetailsViewActive = !this.isDetailsViewActive;\r\n    },\r\n    updateRecord(val) {\r\n      this.$emit(\"updateRecord\", {\r\n        recordId: this.selectedRecordID,\r\n        values: [...val],\r\n      });\r\n      this.toggleDetailsView();\r\n    },\r\n    submitRecord(val) {\r\n      this.$emit(\"submitRecord\", { values: [...val] });\r\n      this.toggleDetailsView();\r\n    },\r\n    deleteRecord(id) {\r\n      this.$emit(\"deleteRecord\", id);\r\n      this.toggleDetailsView();\r\n    },\r\n    nextRecord() {\r\n      // const index = this.dataObject.findIndex(\r\n      //   (item) => item.id === this.selectedRecord.id\r\n      // )\r\n      // this.selectedRecord = this.dataObject[index + 1]\r\n    },\r\n    previousRecord() {\r\n      // const index = this.dataObject.findIndex(\r\n      //   (item) => item.id === this.selectedRecord.id\r\n      // )\r\n      // this.selectedRecord = this.dataObject[index - 1]\r\n    },\r\n    /* Details view controls : End */\r\n    /* Field Records controls : Start */\r\n    closeFieldDialog() {\r\n      this.selectedField = null;\r\n      this.toggleFieldDialog();\r\n    },\r\n    toggleFieldDialog() {\r\n      this.isFieldDialogVisible = !this.isFieldDialogVisible;\r\n    },\r\n    addField(val) {\r\n      this.$emit(\"addField\", val, this.selectedRecordID);\r\n      this.toggleFieldDialog();\r\n    },\r\n    editField(id) {\r\n      this.selectedField = this.customFields.find((item) => item.id === id);\r\n      this.toggleFieldDialog();\r\n    },\r\n    updateField(val) {\r\n      this.$emit(\"updateField\", val);\r\n      this.selectedField = null;\r\n      this.toggleFieldDialog();\r\n    },\r\n    uploadFiles (val) {\r\n      this.$emit('uploadFiles', val)\r\n    },\r\n    deleteFile (val) {\r\n      this.$emit('deleteFile', val)\r\n    },\r\n    updateSelectedRecord (fieldId, record) {\r\n      if (record.id === this.selectedRecordID)\r\n        this.selectedRecord = this.selectedRecord.map(\r\n          (field) => {\r\n            if (field.fieldId === fieldId) {\r\n              return {\r\n                ...field,\r\n                filesValue: record.customFieldsData.find(\r\n                  (f) => f.fieldId === fieldId\r\n                ).filesValue\r\n              }\r\n            }\r\n            return field\r\n          }\r\n        )\r\n    },\r\n    deleteField (id) {\r\n      this.$emit('deleteField', {\r\n        fieldId: id\r\n      })\r\n    },\r\n    initRecordLinkFields (record) {\r\n      if (isEmpty(this.recordLinkData)) {\r\n        this.recordLinkData = record\r\n        return\r\n      }\r\n\r\n      Object.keys(record).forEach((key) => {\r\n        if (this.recordLinkData[key]) this.recordLinkData[key] = record[key]\r\n        else\r\n          this.recordLinkData = {\r\n            ...this.recordLinkData,\r\n            [key]: record[key]\r\n          }\r\n      })\r\n    },\r\n    addAttachments (fieldId, filesArray) {\r\n      const fieldName =\r\n        this.customFields.find((field) => field.id === fieldId).name || ''\r\n      const existingFiles = this.$refs.detailsView.form[fieldName] || []\r\n      this.$refs.detailsView.form[fieldName] = [\r\n        ...existingFiles,\r\n        ...filesArray\r\n      ]\r\n\r\n      this.selectedRecord = this.selectedRecord.map((field) => {\r\n        if (field.fieldId === fieldId) {\r\n          return {\r\n            ...field,\r\n            filesValue: [...this.$refs.detailsView.form[fieldName]]\r\n          }\r\n        }\r\n        return field\r\n      })\r\n    },\r\n    addNewRecordAttachments (fieldId, filesArray) {\r\n      if (this.$refs.detailsView) {\r\n        const fieldName =\r\n          this.customFields.find((field) => field.id === fieldId).name || ''\r\n        if (fieldName) {\r\n          const existingFiles = this.$refs.detailsView.form[fieldName] || []\r\n          this.$refs.detailsView.form[fieldName] = [\r\n            ...existingFiles,\r\n            ...filesArray\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    /* Field Records controls : End */\r\n  }\r\n}\r\n</script>","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"div\",\n    { staticClass: \"view-edit-records\" },\n    [\n      _vm.isDetailsViewActive\n        ? _c(\"DetailsView\", {\n            ref: \"detailsView\",\n            attrs: {\n              isPromptActive: _vm.isDetailsViewActive,\n              customFields: _vm.customFields,\n              selectedItem: _vm.selectedRecord,\n              nextIconVisible: _vm.hasNextRecord,\n              previousIconVisible: _vm.hasPreviousRecord,\n              recordLinkData: _vm.recordLinkData,\n            },\n            on: {\n              toggleDialog: _vm.toggleDetailsView,\n              \"update:Details\": _vm.updateRecord,\n              \"submit:Details\": _vm.submitRecord,\n              \"delete:Details\": _vm.deleteRecord,\n              next: _vm.nextRecord,\n              prev: _vm.previousRecord,\n              toggleFieldDialog: _vm.toggleFieldDialog,\n              editField: _vm.editField,\n              deleteField: _vm.deleteField,\n              uploadFiles: _vm.uploadFiles,\n              \"delete:File\": _vm.deleteFile,\n              searchLinkedRecords: _vm.searchLinkedRecords,\n            },\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.isFieldDialogVisible\n        ? _c(\"FieldForm\", {\n            attrs: {\n              isPromptActive: _vm.isFieldDialogVisible,\n              typesList: _vm.fieldTypes,\n              selectedField: _vm.selectedField,\n              submenuList: _vm.submenuList,\n              rollUpTargets: _vm.rollUpTargets,\n              customFields: _vm.customFields,\n              submenuId: _vm.submenuId,\n            },\n            on: {\n              closeDialog: _vm.closeFieldDialog,\n              addField: _vm.addField,\n              updateField: _vm.updateField,\n            },\n          })\n        : _vm._e(),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./ViewEditRecord.vue?vue&type=template&id=051de0be&\"\nimport script from \"./ViewEditRecord.vue?vue&type=script&lang=js&\"\nexport * from \"./ViewEditRecord.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\laragon\\\\www\\\\ezpapel\\\\panel\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('051de0be')) {\n      api.createRecord('051de0be', component.options)\n    } else {\n      api.reload('051de0be', component.options)\n    }\n    module.hot.accept(\"./ViewEditRecord.vue?vue&type=template&id=051de0be&\", function () {\n      api.rerender('051de0be', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/src/views/pages/menu/components/ViewEditRecord.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewEditRecord.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewEditRecord.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewEditRecord.vue?vue&type=template&id=051de0be&\""],"sourceRoot":""}
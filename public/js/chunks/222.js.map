{"version":3,"sources":["webpack:///resources/js/src/views/pages/tripV2/components/Invoice/EditPanel/ItemBlock/index.vue","webpack:///./resources/js/src/views/pages/tripV2/components/Invoice/EditPanel/ItemBlock/index.vue","webpack:///./resources/js/src/views/pages/tripV2/components/Invoice/EditPanel/ItemBlock/index.vue?a4ea","webpack:///./resources/js/src/views/pages/tripV2/components/Invoice/EditPanel/ItemBlock/index.vue?33ce","webpack:///./resources/js/src/views/pages/tripV2/components/Invoice/EditPanel/ItemBlock/index.vue?74d2"],"names":["render","_vm","_c","_self","staticClass","_v","hasRecordLinkAccess","showAddItemCard","attrs","color","size","type","on","click","toggleRecordDialog","_e","showAddItemCardItems","_s","formatRate","itemTotal","items","length","_l","item","index","key","name","qty","formatAmountValue","rate","icon","$event","stopPropagation","editItem","deleteItem","ref","itemValue","itemToEdit","warehouseOptions","recordList","cancel","save","addItem","recordDialogActive","isDialogActive","priceFieldId","selectedFieldId","onClose","closeRecordDialog","onSelect","linkRecord","searchLinkedRecords","staticRenderFns","_withStripped"],"mappings":"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","file":"js/chunks/222.js","sourcesContent":["<template>\r\n  <div>\r\n    <vx-card class=\"mt-2\">\r\n      <header>\r\n        <div class=\"vx-row flex justify-between items-end\">\r\n          <div class=\"vx-col\">\r\n            <h5 class=\"font-bold\">Items</h5>\r\n          </div>\r\n          <div class=\"vx-col flex\">\r\n            <vs-button\r\n              v-if=\"hasRecordLinkAccess && !showAddItemCard\"\r\n              class=\"mr-2\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              type=\"filled\"\r\n              @click=\"toggleRecordDialog\"\r\n            >\r\n              ADD ITEM FROM INVENTORY\r\n            </vs-button>\r\n            <vs-button\r\n              v-if=\"!showAddItemCard\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              type=\"filled\"\r\n              @click=\"showAddItemCardItems\"\r\n            >\r\n              ADD ITEM\r\n            </vs-button>\r\n            <strong v-else> {{ formatRate(itemTotal) }} </strong>\r\n          </div>\r\n        </div>\r\n        <vs-divider />\r\n      </header>\r\n      <section v-if=\"items.length\">\r\n        <section v-for=\"(item, index) in items\" :key=\"index\">\r\n          <div class=\"vx-row flex justify-between items-center\">\r\n            <div class=\"vx-col w-1/2\">\r\n              <h5>{{ item.name }} x {{ formatRate(item.qty) }}</h5>\r\n            </div>\r\n            <div class=\"vx-col w-1/2 flex justify-end items-baseline\">\r\n              <h5 class=\"mr-4\">\r\n                {{ formatAmountValue(formatRate(item.qty * item.rate)) }}\r\n              </h5>\r\n              <vs-button\r\n                color=\"primary\"\r\n                size=\"small\"\r\n                type=\"border\"\r\n                icon=\"edit\"\r\n                @click.stop=\"editItem(index)\"\r\n              />\r\n              <vs-button\r\n                class=\"ml-1\"\r\n                color=\"danger\"\r\n                size=\"small\"\r\n                type=\"border\"\r\n                icon=\"delete\"\r\n                @click.stop=\"deleteItem(index)\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <vs-divider />\r\n        </section>\r\n        <div class=\"vx-row flex justify-between items-end\">\r\n          <div class=\"vx-col\">\r\n            <h5 class=\"font-bold\"></h5>\r\n          </div>\r\n          <div class=\"vx-col flex\">\r\n            <strong> {{ formatRate(itemTotal) }} </strong>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <section v-else>\r\n        <div class=\"vx-row flex justify-centre\">\r\n          <div class=\"vx-col\">\r\n            <h5 class=\"font-italic\">No items added yet</h5>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <section v-if=\"showAddItemCard\" class=\"mt-3\">\r\n        <AddItemCard\r\n          ref=\"addItemCard\"\r\n          :itemValue=\"itemToEdit\"\r\n          :warehouseOptions=\"warehouseOptions\"\r\n          :recordList=\"recordList\"\r\n          @cancel=\"showAddItemCard = false\"\r\n          @save=\"addItem\"\r\n          @toggleRecordDialog=\"toggleRecordDialog\"\r\n        />\r\n      </section>\r\n    </vx-card>\r\n\r\n    <!-- Record Dialog -->\r\n    <RecordDialog\r\n      v-if=\"recordDialogActive\"\r\n      :isDialogActive=\"recordDialogActive\"\r\n      :recordList=\"recordList\"\r\n      :priceFieldId=\"priceFieldId\"\r\n      :selectedFieldId=\"selectedFieldId\"\r\n      @onClose=\"closeRecordDialog\"\r\n      @onSelect=\"linkRecord\"\r\n      @searchLinkedRecords=\"searchLinkedRecords\"\r\n    />\r\n  </div>\r\n</template>\r\n<!-- eslint-disable multiline-ternary implicit-arrow-linebreak -->\r\n<script>\r\nimport { formatAmount } from \"@/helpers/helper\";\r\nimport { isEmpty } from \"lodash\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nimport config from \"@/config/constants\";\r\n\r\nexport default {\r\n  name: \"ItemCreator\",\r\n  props: {\r\n    value: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  components: {\r\n    AddItemCard: () => import(\"./AddItemCard\"),\r\n    RecordDialog: () => import(\"../RecordDialog\"),\r\n  },\r\n  data() {\r\n    return {\r\n      items: [],\r\n      showAddItemCard: false,\r\n      itemToEdit: null,\r\n      recordList: [],\r\n      recordDialogActive: false,\r\n      submenuId: null,\r\n      priceFieldId: null,\r\n      selectedFieldId: null,\r\n      selectedRecordIDX: null,\r\n      warehouseOptions: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  watch: {\r\n    value: {\r\n      handler: function (val) {\r\n        this.items = val;\r\n      },\r\n      deep: true,\r\n    },\r\n    items: {\r\n      handler: function (val) {\r\n        this.$emit(\"input\", val);\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"auth\", [\"user\"]),\r\n\r\n    itemTotal() {\r\n      const total = this.items.reduce((acc, item) => {\r\n        return acc + item.qty * item.rate;\r\n      }, 0);\r\n\r\n      return this.formatAmountValue(Number(total).toFixed(2));\r\n    },\r\n    hasRecordLinkAccess() {\r\n      return (\r\n        this.user &&\r\n        this.user.admin_company_details &&\r\n        this.user.admin_company_details.admin_company_detail_id &&\r\n        config.companiesWithInvoiceRecordPopupAccess.includes(\r\n          Number(this.user.admin_company_details.admin_company_detail_id)\r\n        )\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    showAddItemCardItems() {\r\n      this.showAddItemCard = true;\r\n      this.itemToEdit = null;\r\n    },\r\n    formatRate(rate) {\r\n      const decimals = rate.toString().split(\".\")[1];\r\n\r\n      return decimals && decimals.length > 2 ? parseFloat(rate) : rate;\r\n    },\r\n    addItem(item) {\r\n      const { index } = item;\r\n      if (index !== null && index >= 0) {\r\n        delete item.index;\r\n        this.$set(this.items, index, item);\r\n      } else {\r\n        this.items.push(item);\r\n      }\r\n      this.showAddItemCard = false;\r\n      this.itemToEdit = null;\r\n      this.selectedRecordIDX = null;\r\n    },\r\n    deleteItem(index) {\r\n      if (this.itemToEdit && this.itemToEdit.index === index) {\r\n        this.itemToEdit = null;\r\n        this.showAddItemCard = false;\r\n        this.selectedRecordIDX = null;\r\n      }\r\n      this.items.splice(index, 1);\r\n    },\r\n    editItem(index) {\r\n      this.itemToEdit = {\r\n        ...this.items[index],\r\n        qty: this.items[index].qty ? Number(this.items[index].qty) : \"\",\r\n        rate: this.items[index].rate ? Number(this.items[index].rate) : \"\",\r\n        index,\r\n      };\r\n      this.showAddItemCard = true;\r\n      this.selectedRecordIDX = index;\r\n\r\n      if (this.showAddItemCard && this.$refs.addItemCard) {\r\n        this.$refs.addItemCard.updateCurrentItem({\r\n          ...this.itemToEdit,\r\n        });\r\n      }\r\n    },\r\n    formatAmountValue(amount) {\r\n      return formatAmount(amount);\r\n    },\r\n    async searchLinkedRecords(searchObj) {\r\n      let records = await this.fetchTargetRecords(\r\n        this.submenuId,\r\n        searchObj.fieldId,\r\n        searchObj.text\r\n      );\r\n\r\n      if (!isEmpty(records)) {\r\n        records = this.formatTargetRecords(records);\r\n        this.recordList = records[searchObj.fieldId];\r\n      }\r\n    },\r\n    formatTargetRecords(records) {\r\n      const customFields = records.recordCustomFields; //.slice(0, 4)\r\n      const customFieldsData = records.recordData.map((record) => {\r\n        record.customFieldsData = record.customFieldsData.filter((field) =>\r\n          customFields.find((customField) => customField.id === field.fieldId)\r\n        );\r\n\r\n        return record;\r\n      });\r\n      const fieldValueTypes = [\r\n        \"textValue\",\r\n        \"userValue\",\r\n        \"singleSelectValue\",\r\n        \"numberValue\",\r\n        \"currencyValue\",\r\n        \"multiSelectValue\",\r\n      ];\r\n\r\n      const formattedRecords = customFieldsData.map((record) => {\r\n        const data = record.customFieldsData\r\n          .map((field) => {\r\n            const customField = customFields.find(\r\n              (customField) =>\r\n                customField.id === field.fieldId &&\r\n                fieldValueTypes.some((type) => field[type])\r\n            );\r\n\r\n            if (customField) {\r\n              let fieldValue = \"\";\r\n              let fieldColor = \"\";\r\n\r\n              if (field.textValue) fieldValue = field.textValue;\r\n              if (field.userValue)\r\n                fieldValue = field.userValue\r\n                  .map((user) => this.allUsersMap[user.userId].fullName)\r\n                  .join(\", \");\r\n              if (field.singleSelectValue) {\r\n                fieldValue = customField.singleSelectOptions.find(\r\n                  (option) => option.optionId === field.singleSelectValue\r\n                ).optionName;\r\n\r\n                fieldColor = customField.singleSelectOptions.find(\r\n                  (option) => option.optionId === field.singleSelectValue\r\n                ).color;\r\n              }\r\n              if (field.hasOwnProperty(\"numberValue\"))\r\n                fieldValue = field.numberValue;\r\n              if (field.currencyValue)\r\n                fieldValue = field.currencyValue\r\n                  ? `$${parseFloat(field.currencyValue).toFixed(2)}`\r\n                  : \"\";\r\n              if (field.multiSelectValue) {\r\n                fieldValue = customField.multiSelectOptions\r\n                  .filter((option) =>\r\n                    field.multiSelectValue.includes(option.optionId)\r\n                  )\r\n                  .map((option) => option.optionName)\r\n                  .join(\", \");\r\n              }\r\n\r\n              const values = {\r\n                fieldId: customField.id,\r\n                name: customField.name,\r\n                value: fieldValue,\r\n                color: fieldColor,\r\n                type: customField.type,\r\n              };\r\n\r\n              return values;\r\n            }\r\n          })\r\n          .filter((field) => field);\r\n\r\n        return {\r\n          recordId: record.id,\r\n          data,\r\n        };\r\n      });\r\n\r\n      return { [records.fieldId]: formattedRecords };\r\n    },\r\n    async fetchTargetRecords(submenuId, fieldId, searchKeyWords = null) {\r\n      try {\r\n        const {\r\n          status,\r\n          data: {\r\n            result,\r\n            payload: { recordCustomFields, recordData },\r\n          },\r\n        } = await this.$store.dispatch(\"menuV2/getTargetRecords\", {\r\n          submenuId,\r\n          fieldId,\r\n          searchKeyWords,\r\n        });\r\n\r\n        if (status === 200 && result) {\r\n          return {\r\n            fieldId,\r\n            recordCustomFields,\r\n            recordData,\r\n          };\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    async init() {\r\n      try {\r\n        if (this.hasRecordLinkAccess) {\r\n          const { fieldId, submenuId, priceFieldId, warehouseOptions } =\r\n            config.invoiceRecordPopup.filter(\r\n              (field) =>\r\n                field.companyId ===\r\n                Number(this.user.admin_company_details.admin_company_detail_id)\r\n            )[0] || {};\r\n\r\n          if (fieldId && submenuId) {\r\n            let records = await this.fetchTargetRecords(submenuId, fieldId);\r\n\r\n            if (!isEmpty(records)) {\r\n              records = this.formatTargetRecords(records);\r\n              this.recordList = records[fieldId];\r\n            }\r\n          }\r\n\r\n          this.submenuId = submenuId || null;\r\n          this.priceFieldId = priceFieldId || null;\r\n          this.selectedFieldId = fieldId || null;\r\n          this.warehouseOptions = warehouseOptions || [];\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    toggleRecordDialog() {\r\n      this.recordDialogActive = true;\r\n    },\r\n    closeRecordDialog() {\r\n      this.recordDialogActive = false;\r\n    },\r\n    linkRecord(record) {\r\n      this.itemToEdit = {\r\n        name: record.item,\r\n        qty: 1,\r\n        rate: record.price,\r\n        syncToMenu: {\r\n          recordLinkValues: [\r\n            {\r\n              recordId: record.recordId,\r\n            },\r\n          ],\r\n          singleSelectValue: null,\r\n        },\r\n        index: this.selectedRecordIDX,\r\n      };\r\n      this.showAddItemCard = true;\r\n\r\n      if (this.$refs.addItemCard) {\r\n        this.$refs.addItemCard.updateCurrentItem({\r\n          ...this.itemToEdit,\r\n        });\r\n      }\r\n\r\n      this.closeRecordDialog();\r\n    },\r\n  },\r\n};\r\n</script>\r\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"div\",\n    [\n      _c(\"vx-card\", { staticClass: \"mt-2\" }, [\n        _c(\n          \"header\",\n          [\n            _c(\n              \"div\",\n              { staticClass: \"vx-row flex justify-between items-end\" },\n              [\n                _c(\"div\", { staticClass: \"vx-col\" }, [\n                  _c(\"h5\", { staticClass: \"font-bold\" }, [_vm._v(\"Items\")]),\n                ]),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"vx-col flex\" },\n                  [\n                    _vm.hasRecordLinkAccess && !_vm.showAddItemCard\n                      ? _c(\n                          \"vs-button\",\n                          {\n                            staticClass: \"mr-2\",\n                            attrs: {\n                              color: \"primary\",\n                              size: \"small\",\n                              type: \"filled\",\n                            },\n                            on: { click: _vm.toggleRecordDialog },\n                          },\n                          [\n                            _vm._v(\n                              \"\\n            ADD ITEM FROM INVENTORY\\n          \"\n                            ),\n                          ]\n                        )\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    !_vm.showAddItemCard\n                      ? _c(\n                          \"vs-button\",\n                          {\n                            attrs: {\n                              color: \"primary\",\n                              size: \"small\",\n                              type: \"filled\",\n                            },\n                            on: { click: _vm.showAddItemCardItems },\n                          },\n                          [_vm._v(\"\\n            ADD ITEM\\n          \")]\n                        )\n                      : _c(\"strong\", [\n                          _vm._v(\n                            \" \" + _vm._s(_vm.formatRate(_vm.itemTotal)) + \" \"\n                          ),\n                        ]),\n                  ],\n                  1\n                ),\n              ]\n            ),\n            _vm._v(\" \"),\n            _c(\"vs-divider\"),\n          ],\n          1\n        ),\n        _vm._v(\" \"),\n        _vm.items.length\n          ? _c(\n              \"section\",\n              [\n                _vm._l(_vm.items, function (item, index) {\n                  return _c(\n                    \"section\",\n                    { key: index },\n                    [\n                      _c(\n                        \"div\",\n                        {\n                          staticClass:\n                            \"vx-row flex justify-between items-center\",\n                        },\n                        [\n                          _c(\"div\", { staticClass: \"vx-col w-1/2\" }, [\n                            _c(\"h5\", [\n                              _vm._v(\n                                _vm._s(item.name) +\n                                  \" x \" +\n                                  _vm._s(_vm.formatRate(item.qty))\n                              ),\n                            ]),\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\n                            \"div\",\n                            {\n                              staticClass:\n                                \"vx-col w-1/2 flex justify-end items-baseline\",\n                            },\n                            [\n                              _c(\"h5\", { staticClass: \"mr-4\" }, [\n                                _vm._v(\n                                  \"\\n              \" +\n                                    _vm._s(\n                                      _vm.formatAmountValue(\n                                        _vm.formatRate(item.qty * item.rate)\n                                      )\n                                    ) +\n                                    \"\\n            \"\n                                ),\n                              ]),\n                              _vm._v(\" \"),\n                              _c(\"vs-button\", {\n                                attrs: {\n                                  color: \"primary\",\n                                  size: \"small\",\n                                  type: \"border\",\n                                  icon: \"edit\",\n                                },\n                                on: {\n                                  click: function ($event) {\n                                    $event.stopPropagation()\n                                    return _vm.editItem(index)\n                                  },\n                                },\n                              }),\n                              _vm._v(\" \"),\n                              _c(\"vs-button\", {\n                                staticClass: \"ml-1\",\n                                attrs: {\n                                  color: \"danger\",\n                                  size: \"small\",\n                                  type: \"border\",\n                                  icon: \"delete\",\n                                },\n                                on: {\n                                  click: function ($event) {\n                                    $event.stopPropagation()\n                                    return _vm.deleteItem(index)\n                                  },\n                                },\n                              }),\n                            ],\n                            1\n                          ),\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\"vs-divider\"),\n                    ],\n                    1\n                  )\n                }),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"vx-row flex justify-between items-end\" },\n                  [\n                    _c(\"div\", { staticClass: \"vx-col\" }, [\n                      _c(\"h5\", { staticClass: \"font-bold\" }),\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\"div\", { staticClass: \"vx-col flex\" }, [\n                      _c(\"strong\", [\n                        _vm._v(\n                          \" \" + _vm._s(_vm.formatRate(_vm.itemTotal)) + \" \"\n                        ),\n                      ]),\n                    ]),\n                  ]\n                ),\n              ],\n              2\n            )\n          : _c(\"section\", [\n              _c(\"div\", { staticClass: \"vx-row flex justify-centre\" }, [\n                _c(\"div\", { staticClass: \"vx-col\" }, [\n                  _c(\"h5\", { staticClass: \"font-italic\" }, [\n                    _vm._v(\"No items added yet\"),\n                  ]),\n                ]),\n              ]),\n            ]),\n        _vm._v(\" \"),\n        _vm.showAddItemCard\n          ? _c(\n              \"section\",\n              { staticClass: \"mt-3\" },\n              [\n                _c(\"AddItemCard\", {\n                  ref: \"addItemCard\",\n                  attrs: {\n                    itemValue: _vm.itemToEdit,\n                    warehouseOptions: _vm.warehouseOptions,\n                    recordList: _vm.recordList,\n                  },\n                  on: {\n                    cancel: function ($event) {\n                      _vm.showAddItemCard = false\n                    },\n                    save: _vm.addItem,\n                    toggleRecordDialog: _vm.toggleRecordDialog,\n                  },\n                }),\n              ],\n              1\n            )\n          : _vm._e(),\n      ]),\n      _vm._v(\" \"),\n      _vm.recordDialogActive\n        ? _c(\"RecordDialog\", {\n            attrs: {\n              isDialogActive: _vm.recordDialogActive,\n              recordList: _vm.recordList,\n              priceFieldId: _vm.priceFieldId,\n              selectedFieldId: _vm.selectedFieldId,\n            },\n            on: {\n              onClose: _vm.closeRecordDialog,\n              onSelect: _vm.linkRecord,\n              searchLinkedRecords: _vm.searchLinkedRecords,\n            },\n          })\n        : _vm._e(),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1a971fb6&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\laragon\\\\www\\\\ezpapel\\\\panel\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('1a971fb6')) {\n      api.createRecord('1a971fb6', component.options)\n    } else {\n      api.reload('1a971fb6', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=1a971fb6&\", function () {\n      api.rerender('1a971fb6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/src/views/pages/tripV2/components/Invoice/EditPanel/ItemBlock/index.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!../../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=1a971fb6&\""],"sourceRoot":""}
{"version":3,"sources":["webpack:///resources/js/src/views/pages/safety/IncidentsInfo.vue","webpack:///./resources/js/src/views/pages/safety/IncidentsInfo.vue","webpack:///./resources/js/src/views/pages/safety/IncidentsInfo.vue?9349","webpack:///./resources/js/src/views/pages/safety/IncidentsInfo.vue?1d4d","webpack:///./resources/js/src/views/pages/safety/IncidentsInfo.vue?4f61","webpack:///./resources/js/src/views/pages/safety/IncidentsInfo.vue?2086","webpack:///./resources/js/src/views/pages/safety/IncidentsInfo.vue?9666","webpack:///./resources/js/src/views/pages/safety/IncidentsInfo.vue?0f79"],"names":["render","_vm","_c","_self","staticClass","_v","_l","chips","id","label","key","attrs","color","selectedTab","nativeOn","click","$event","changeTab","_s","icon","on","preventDefault","redirectToIncidentList","apply","arguments","isEditMode","type","shareClick","_e","directives","name","rawName","value","expression","header","incidentInfoHeaderLabel","incidentDetails","enableSubmit","isEdit","submit","submitForm","tab","component","ref","refInFor","tag","saveIncident","cancel","delete","onConfirmDelete","model","callback","$$v","staticRenderFns","_withStripped"],"mappings":"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","file":"js/chunks/53.js","sourcesContent":["<template>\r\n  <div class=\"dashboard incident-dashboard\">\r\n    <!-- Header Section -->\r\n    <vx-card>\r\n      <div class=\"vx-row\">\r\n        <div class=\"vx-col flex-wrap flex justify-between w-full\">\r\n          <div class=\"flex\">\r\n            <h3 class=\"self-center\">Incidents</h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <vs-divider />\r\n      <div class=\"vx-row\">\r\n        <div class=\"vx-col flex-wrap flex justify-between w-full\">\r\n          <div class=\"flex\">\r\n            <vs-chip\r\n              class=\"cursor-pointer mx-2\"\r\n              v-for=\"{ id, label } in chips\"\r\n              :key=\"id\"\r\n              :color=\"selectedTab === id ? 'primary' : ''\"\r\n              @click.native=\"changeTab(id)\"\r\n            >\r\n              {{ label }}\r\n            </vs-chip>\r\n          </div>\r\n          <span class=\"flex align-items-center gap-3\">\r\n            <vs-button\r\n              color=\"primary\"\r\n              icon=\"format_list_bulleted\"\r\n              @click.prevent=\"redirectToIncidentList\"\r\n            >\r\n              Incidents\r\n            </vs-button>\r\n            <vs-button\r\n              v-if=\"selectedTab === 2 && isEditMode\"\r\n              type=\"border\"\r\n              color=\"primary\"\r\n              @click.prevent=\"shareClick\"\r\n            >\r\n              Share\r\n            </vs-button>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </vx-card>\r\n    <div>\r\n      <div v-show=\"selectedTab === 1\">\r\n        <!-- Truck Summary Card -->\r\n        <incident-summary-card\r\n          :header=\"incidentInfoHeaderLabel\"\r\n          :incidentDetails=\"incidentDetails\"\r\n          :enableSubmit=\"true\"\r\n          :isEdit=\"isEditMode\"\r\n          @submit=\"submitForm\"\r\n        />\r\n      </div>\r\n      <section v-for=\"tab in chips\" :key=\"tab.id\">\r\n        <component\r\n          v-show=\"selectedTab === tab.id\"\r\n          :ref=\"tab.label\"\r\n          :key=\"tab.id\"\r\n          :is=\"tab.component\"\r\n          :isEdit=\"isEditMode\"\r\n          v-model=\"incidentDetails\"\r\n          @saveIncident=\"submitForm\"\r\n          @cancel=\"redirectToIncidentList\"\r\n          @delete=\"onConfirmDelete\"\r\n        />\r\n      </section>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'IncidentsInfo',\r\n  components: {\r\n    IncidentOverviewTab: () => import('./components/IncidentOverviewTab'),\r\n    IncidentSummaryCard: () => import('./components/IncidentSummaryCard'),\r\n    IncidentEmailsTab: () => import('./components/IncidentEmailsTab'),\r\n    IncidentFilesTab: () => import('./components/IncidentFilesTab'),\r\n    IncidentNoteTab: () => import('./components/IncidentNoteTab'),\r\n  },\r\n  computed: {\r\n    chips() {\r\n      const tabs = [\r\n        {\r\n          id: 1,\r\n          label: 'Overview',\r\n          component: 'IncidentOverviewTab',\r\n        },\r\n        {\r\n          id: 2,\r\n          label: 'Emails',\r\n          component: 'IncidentEmailsTab',\r\n        },\r\n        {\r\n          id: 3,\r\n          label: 'Files',\r\n          component: 'IncidentFilesTab',\r\n        },\r\n        {\r\n          id: 4,\r\n          label: 'Notes',\r\n          component: 'IncidentNoteTab',\r\n        },\r\n      ];\r\n\r\n      return tabs.filter((tab) => {\r\n        if (!this.isEditMode) {\r\n          return tab.id !== 2;\r\n        }\r\n        return tab;\r\n      });\r\n    },\r\n    incidentInfoHeaderLabel() {\r\n      return this.isEditMode ? 'Update Incident' : 'Create Incident';\r\n    },\r\n    isEditMode() {\r\n      return this.$route.name === 'UpdateSafety';\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      selectedTab: 1,\r\n      incidentDetails: {\r\n        tagId: null,\r\n        incidentDate: null,\r\n        incidentTime: null,\r\n        status: null,\r\n        closedDate: null,\r\n        notes: null,\r\n        incidentClaimNumber: null,\r\n        thirdPartyIncidentClaimNumber: null,\r\n        ncicNumber: null,\r\n        savedAddressAffected: null,\r\n        chargeBack: null,\r\n        chargeBackAmount: null,\r\n        estimates: null,\r\n        costIncurred: null,\r\n        costAmount: null,\r\n        dealWithInsuranceCompanyId: null,\r\n        involvedType: null,\r\n        involvedPersonType: null,\r\n        involvedPersonName: null,\r\n        involvedThirdPartyId: null,\r\n        correctiveActionApplied: null,\r\n        dotRecordable: null,\r\n        preventable: null,\r\n        atFault: null,\r\n        truckId: null,\r\n        trailerId: null,\r\n        locationType: null,\r\n        savedAddressId: null,\r\n        incidentType: null,\r\n        description: null,\r\n        files: [],\r\n        notesArray: [],\r\n      },\r\n      truckData: null,\r\n      driversList: [],\r\n      selectedTruckTypes: [],\r\n    };\r\n  },\r\n  created() {\r\n    if (this.isEditMode) {\r\n      this.getIncidentDetails();\r\n    }\r\n  },\r\n  methods: {\r\n    shareClick() {\r\n      const payload = {\r\n        incidentId: this.incidentDetails.incidentId,\r\n        type: 'publicFiles',\r\n      };\r\n      this.$store.dispatch('incidents/shareLink', payload).then(({ data }) => {\r\n        let url = data.payload.link;\r\n        let that = this;\r\n        this.$copyText(url).then(\r\n          function (e) {\r\n            that.$vs.notify({\r\n              title: 'Success',\r\n              text: 'Copied',\r\n              color: 'success',\r\n            });\r\n          },\r\n          function (e) {\r\n            that.$vs.notify({\r\n              title: 'Danger',\r\n              text: 'Can not copy',\r\n              color: 'danger',\r\n            });\r\n          }\r\n        );\r\n      });\r\n    },\r\n    changeTab(id) {\r\n      if (!id) return;\r\n      this.selectedTab = id;\r\n    },\r\n    redirectToIncidentList() {\r\n      let query = {};\r\n      if (this.$route.query && this.$route.query.tab) {\r\n        query = { tab: this.$route.query.tab };\r\n      }\r\n\r\n      this.$router.push({ name: 'Safety', query });\r\n    },\r\n\r\n    onConfirmDelete() {\r\n      this.$vs.dialog({\r\n        type: 'confirm',\r\n        color: 'danger',\r\n        acceptText: 'Accept',\r\n        title: 'Delete Incident',\r\n        text: 'Are you sure you want to delete this incident?',\r\n        accept: () => this.deleteIncident(),\r\n      });\r\n    },\r\n\r\n    async deleteIncident() {\r\n      try {\r\n        const incidentId = this.$route.params.id;\r\n        const { data } = await this.$store.dispatch(\r\n          'incidents/deleteIncident',\r\n          incidentId\r\n        );\r\n        if (data && data.message === 'Ok') {\r\n          this.$vs.notify({\r\n            color: 'success',\r\n            title: 'Delete Incident',\r\n            text: 'Incident deleted successfully',\r\n          });\r\n          this.redirectToIncidentList();\r\n        }\r\n      } catch (error) {\r\n        this.$vs.notify({\r\n          color: 'danger',\r\n          title: 'Error',\r\n          time: 8000,\r\n          text: error.response.data.message || error.message,\r\n        });\r\n      }\r\n    },\r\n\r\n    async getIncidentDetails() {\r\n      try {\r\n        this.$vs.loading();\r\n        const incidentId = this.$route.params.id;\r\n        const { data } = await this.$store.dispatch(\r\n          'incidents/getIncidentDetails',\r\n          incidentId\r\n        );\r\n\r\n        if (data && data.payload) {\r\n          this.incidentDetails = {\r\n            ...this.incidentDetails,\r\n            ...(data.payload.incident || {}),\r\n          };\r\n        }\r\n\r\n        // Add watch on child component: Overview\r\n        if (this.$refs && this.$refs.Overview && this.$refs.Overview[0]) {\r\n          this.$refs.Overview[0].addWatchOnIncidentDate();\r\n        }\r\n      } catch (error) {\r\n        this.$vs.notify({\r\n          time: 8000,\r\n          color: 'danger',\r\n          title: 'Error',\r\n          text: error.response.data.message || error.message,\r\n        });\r\n      } finally {\r\n        this.$vs.loading.close();\r\n      }\r\n    },\r\n    async submitForm() {\r\n      try {\r\n        delete this.incidentDetails.emails;\r\n\r\n        if (this.isEditMode) {\r\n          delete this.incidentDetails.files;\r\n          delete this.incidentDetails.notesArray;\r\n\r\n          await this.$store.dispatch(\r\n            'incidents/updateIncident',\r\n            this.incidentDetails\r\n          );\r\n\r\n          this.$vs.notify({\r\n            time: 8000,\r\n            color: 'success',\r\n            title: 'Success',\r\n            text: 'Incident updated successfully',\r\n          });\r\n        } else {\r\n          if (\r\n            this.incidentDetails.files &&\r\n            this.incidentDetails.files.length > 0\r\n          ) {\r\n            this.incidentDetails.files = this.incidentDetails.files.map(\r\n              (file) => {\r\n                if (file.isPrivate !== 'private') {\r\n                  file.isPrivate = null;\r\n                }\r\n                // Remove file object from the payload\r\n                delete file.file;\r\n\r\n                return file;\r\n              }\r\n            );\r\n          }\r\n\r\n          if (\r\n            this.incidentDetails.notesArray &&\r\n            this.incidentDetails.notesArray.length > 0\r\n          ) {\r\n            this.incidentDetails.notesArray =\r\n              this.incidentDetails.notesArray.map((note) => {\r\n                return {\r\n                  localDate: note.localDate,\r\n                  localTime: note.localTime,\r\n                  note: note.note,\r\n                };\r\n              });\r\n          }\r\n\r\n          await this.$store.dispatch(\r\n            'incidents/createIncident',\r\n            this.incidentDetails\r\n          );\r\n\r\n          this.$vs.notify({\r\n            time: 8000,\r\n            color: 'success',\r\n            title: 'Success',\r\n            text: 'Incident created successfully',\r\n          });\r\n        }\r\n        this.redirectToIncidentList();\r\n      } catch (error) {\r\n        this.$vs.notify({\r\n          time: 8000,\r\n          color: 'danger',\r\n          title: 'Error',\r\n          text: error.response.data.message || error.message,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.incident-dashboard {\r\n  /* Chrome, Safari, Edge, Opera */\r\n  input::-webkit-outer-spin-button,\r\n  input::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n  }\r\n  /*!* Firefox *!*/\r\n  input[type='number'] {\r\n    -moz-appearance: textfield;\r\n  }\r\n  input[type='number']::-webkit-inner-spin-button,\r\n  input[type='number']::-webkit-outer-spin-button {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>\r\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"div\",\n    { staticClass: \"dashboard incident-dashboard\" },\n    [\n      _c(\n        \"vx-card\",\n        [\n          _c(\"div\", { staticClass: \"vx-row\" }, [\n            _c(\n              \"div\",\n              { staticClass: \"vx-col flex-wrap flex justify-between w-full\" },\n              [\n                _c(\"div\", { staticClass: \"flex\" }, [\n                  _c(\"h3\", { staticClass: \"self-center\" }, [\n                    _vm._v(\"Incidents\"),\n                  ]),\n                ]),\n              ]\n            ),\n          ]),\n          _vm._v(\" \"),\n          _c(\"vs-divider\"),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"vx-row\" }, [\n            _c(\n              \"div\",\n              { staticClass: \"vx-col flex-wrap flex justify-between w-full\" },\n              [\n                _c(\n                  \"div\",\n                  { staticClass: \"flex\" },\n                  _vm._l(_vm.chips, function ({ id, label }) {\n                    return _c(\n                      \"vs-chip\",\n                      {\n                        key: id,\n                        staticClass: \"cursor-pointer mx-2\",\n                        attrs: {\n                          color: _vm.selectedTab === id ? \"primary\" : \"\",\n                        },\n                        nativeOn: {\n                          click: function ($event) {\n                            return _vm.changeTab(id)\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n            \" + _vm._s(label) + \"\\n          \"\n                        ),\n                      ]\n                    )\n                  }),\n                  1\n                ),\n                _vm._v(\" \"),\n                _c(\n                  \"span\",\n                  { staticClass: \"flex align-items-center gap-3\" },\n                  [\n                    _c(\n                      \"vs-button\",\n                      {\n                        attrs: {\n                          color: \"primary\",\n                          icon: \"format_list_bulleted\",\n                        },\n                        on: {\n                          click: function ($event) {\n                            $event.preventDefault()\n                            return _vm.redirectToIncidentList.apply(\n                              null,\n                              arguments\n                            )\n                          },\n                        },\n                      },\n                      [_vm._v(\"\\n            Incidents\\n          \")]\n                    ),\n                    _vm._v(\" \"),\n                    _vm.selectedTab === 2 && _vm.isEditMode\n                      ? _c(\n                          \"vs-button\",\n                          {\n                            attrs: { type: \"border\", color: \"primary\" },\n                            on: {\n                              click: function ($event) {\n                                $event.preventDefault()\n                                return _vm.shareClick.apply(null, arguments)\n                              },\n                            },\n                          },\n                          [_vm._v(\"\\n            Share\\n          \")]\n                        )\n                      : _vm._e(),\n                  ],\n                  1\n                ),\n              ]\n            ),\n          ]),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        [\n          _c(\n            \"div\",\n            {\n              directives: [\n                {\n                  name: \"show\",\n                  rawName: \"v-show\",\n                  value: _vm.selectedTab === 1,\n                  expression: \"selectedTab === 1\",\n                },\n              ],\n            },\n            [\n              _c(\"incident-summary-card\", {\n                attrs: {\n                  header: _vm.incidentInfoHeaderLabel,\n                  incidentDetails: _vm.incidentDetails,\n                  enableSubmit: true,\n                  isEdit: _vm.isEditMode,\n                },\n                on: { submit: _vm.submitForm },\n              }),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _vm._l(_vm.chips, function (tab) {\n            return _c(\n              \"section\",\n              { key: tab.id },\n              [\n                _c(tab.component, {\n                  directives: [\n                    {\n                      name: \"show\",\n                      rawName: \"v-show\",\n                      value: _vm.selectedTab === tab.id,\n                      expression: \"selectedTab === tab.id\",\n                    },\n                  ],\n                  key: tab.id,\n                  ref: tab.label,\n                  refInFor: true,\n                  tag: \"component\",\n                  attrs: { isEdit: _vm.isEditMode },\n                  on: {\n                    saveIncident: _vm.submitForm,\n                    cancel: _vm.redirectToIncidentList,\n                    delete: _vm.onConfirmDelete,\n                  },\n                  model: {\n                    value: _vm.incidentDetails,\n                    callback: function ($$v) {\n                      _vm.incidentDetails = $$v\n                    },\n                    expression: \"incidentDetails\",\n                  },\n                }),\n              ],\n              1\n            )\n          }),\n        ],\n        2\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".incident-dashboard {\\n  /* Chrome, Safari, Edge, Opera */\\n  /*!* Firefox *!*/\\n}\\n.incident-dashboard input::-webkit-outer-spin-button,\\n.incident-dashboard input::-webkit-inner-spin-button {\\n  -webkit-appearance: none;\\n}\\n[dir] .incident-dashboard input::-webkit-outer-spin-button, [dir] .incident-dashboard input::-webkit-inner-spin-button {\\n  margin: 0;\\n}\\n.incident-dashboard input[type=number] {\\n  -moz-appearance: textfield;\\n}\\n.incident-dashboard input[type=number]::-webkit-inner-spin-button,\\n.incident-dashboard input[type=number]::-webkit-outer-spin-button {\\n  opacity: 1;\\n}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/lib/index.js??ref--8-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-3!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IncidentsInfo.vue?vue&type=style&index=0&id=b605f1f2&lang=scss&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/lib/index.js??ref--8-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-3!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IncidentsInfo.vue?vue&type=style&index=0&id=b605f1f2&lang=scss&\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/lib/index.js??ref--8-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-3!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IncidentsInfo.vue?vue&type=style&index=0&id=b605f1f2&lang=scss&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import { render, staticRenderFns } from \"./IncidentsInfo.vue?vue&type=template&id=b605f1f2&\"\nimport script from \"./IncidentsInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./IncidentsInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./IncidentsInfo.vue?vue&type=style&index=0&id=b605f1f2&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\laragon\\\\www\\\\ezpapel\\\\panel\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('b605f1f2')) {\n      api.createRecord('b605f1f2', component.options)\n    } else {\n      api.reload('b605f1f2', component.options)\n    }\n    module.hot.accept(\"./IncidentsInfo.vue?vue&type=template&id=b605f1f2&\", function () {\n      api.rerender('b605f1f2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/src/views/pages/safety/IncidentsInfo.vue\"\nexport default component.exports","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IncidentsInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IncidentsInfo.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../node_modules/style-loader/index.js!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/lib/index.js??ref--8-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-3!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IncidentsInfo.vue?vue&type=style&index=0&id=b605f1f2&lang=scss&\"","export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IncidentsInfo.vue?vue&type=template&id=b605f1f2&\""],"sourceRoot":""}